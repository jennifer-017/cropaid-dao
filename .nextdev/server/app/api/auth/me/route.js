"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/me/route";
exports.ids = ["app/api/auth/me/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=F%3A%5Ccropaid-dao%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Ccropaid-dao&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=F%3A%5Ccropaid-dao%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Ccropaid-dao&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var F_cropaid_dao_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/me/route.ts */ \"(rsc)/./app/api/auth/me/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/me/route\",\n        pathname: \"/api/auth/me\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/me/route\"\n    },\n    resolvedPagePath: \"F:\\\\cropaid-dao\\\\app\\\\api\\\\auth\\\\me\\\\route.ts\",\n    nextConfigOutput,\n    userland: F_cropaid_dao_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/me/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlLnRzJmFwcERpcj1GJTNBJTVDY3JvcGFpZC1kYW8lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUYlM0ElNUNjcm9wYWlkLWRhbyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDSDtBQUMxRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nyb3BhaWQtZGFvLz8zMzJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkY6XFxcXGNyb3BhaWQtZGFvXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxtZVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9tZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvbWVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvbWUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJGOlxcXFxjcm9wYWlkLWRhb1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxcbWVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvbWUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=F%3A%5Ccropaid-dao%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Ccropaid-dao&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/me/route.ts":
/*!**********************************!*\
  !*** ./app/api/auth/me/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth/server */ \"(rsc)/./lib/auth/server.ts\");\n\n\nasync function GET() {\n    const user = await (0,_lib_auth_server__WEBPACK_IMPORTED_MODULE_1__.getAuthUser)();\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        user\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ0s7QUFFekMsZUFBZUU7SUFDcEIsTUFBTUMsT0FBTyxNQUFNRiw2REFBV0E7SUFDOUIsT0FBT0QscURBQVlBLENBQUNJLElBQUksQ0FBQztRQUFFRDtJQUFLO0FBQ2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JvcGFpZC1kYW8vLi9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHM/YzcyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgZ2V0QXV0aFVzZXIgfSBmcm9tIFwiQC9saWIvYXV0aC9zZXJ2ZXJcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhVc2VyKCk7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdXNlciB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0QXV0aFVzZXIiLCJHRVQiLCJ1c2VyIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/me/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth/jwt.ts":
/*!*************************!*\
  !*** ./lib/auth/jwt.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthCookie: () => (/* binding */ clearAuthCookie),\n/* harmony export */   getAuthTokenFromCookies: () => (/* binding */ getAuthTokenFromCookies),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   signJwt: () => (/* binding */ signJwt),\n/* harmony export */   verifyJwt: () => (/* binding */ verifyJwt)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../env */ \"(rsc)/./lib/env.ts\");\n\n\n\nconst COOKIE_NAME = \"cropaid_token\";\nfunction signJwt(claims) {\n    const secret = _env__WEBPACK_IMPORTED_MODULE_2__.env.JWT_SECRET;\n    const options = {\n        expiresIn: _env__WEBPACK_IMPORTED_MODULE_2__.env.JWT_EXPIRES_IN\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(claims, secret, options);\n}\nfunction verifyJwt(token) {\n    const payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, _env__WEBPACK_IMPORTED_MODULE_2__.env.JWT_SECRET);\n    if (typeof payload !== \"object\" || payload === null) {\n        throw new Error(\"Invalid token payload\");\n    }\n    const { sub, role } = payload;\n    if (!sub || !role) throw new Error(\"Missing token claims\");\n    return {\n        sub,\n        role\n    };\n}\nfunction setAuthCookie(token) {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().set(COOKIE_NAME, token, {\n        httpOnly: true,\n        sameSite: \"lax\",\n        secure: \"development\" === \"production\",\n        path: \"/\"\n    });\n}\nfunction clearAuthCookie() {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().set(COOKIE_NAME, \"\", {\n        httpOnly: true,\n        sameSite: \"lax\",\n        secure: \"development\" === \"production\",\n        path: \"/\",\n        expires: new Date(0)\n    });\n}\nfunction getAuthTokenFromCookies() {\n    return (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().get(COOKIE_NAME)?.value ?? null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC9qd3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWtFO0FBQzNCO0FBQ1Y7QUFRN0IsTUFBTUcsY0FBYztBQUViLFNBQVNDLFFBQVFDLE1BQWlCO0lBQ3ZDLE1BQU1DLFNBQWlCSixxQ0FBR0EsQ0FBQ0ssVUFBVTtJQUNyQyxNQUFNQyxVQUF1QjtRQUMzQkMsV0FBV1AscUNBQUdBLENBQUNRLGNBQWM7SUFDL0I7SUFDQSxPQUFPVix3REFBUSxDQUFDSyxRQUFRQyxRQUFRRTtBQUNsQztBQUVPLFNBQVNJLFVBQVVDLEtBQWE7SUFDckMsTUFBTUMsVUFBVWQsMERBQVUsQ0FBQ2EsT0FBT1gscUNBQUdBLENBQUNLLFVBQVU7SUFDaEQsSUFBSSxPQUFPTyxZQUFZLFlBQVlBLFlBQVksTUFBTTtRQUNuRCxNQUFNLElBQUlFLE1BQU07SUFDbEI7SUFDQSxNQUFNLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFLEdBQUdKO0lBQ3RCLElBQUksQ0FBQ0csT0FBTyxDQUFDQyxNQUFNLE1BQU0sSUFBSUYsTUFBTTtJQUNuQyxPQUFPO1FBQUVDO1FBQUtDO0lBQUs7QUFDckI7QUFFTyxTQUFTQyxjQUFjTixLQUFhO0lBQ3pDWixxREFBT0EsR0FBR21CLEdBQUcsQ0FBQ2pCLGFBQWFVLE9BQU87UUFDaENRLFVBQVU7UUFDVkMsVUFBVTtRQUNWQyxRQUFRQyxrQkFBeUI7UUFDakNDLE1BQU07SUFDUjtBQUNGO0FBRU8sU0FBU0M7SUFDZHpCLHFEQUFPQSxHQUFHbUIsR0FBRyxDQUFDakIsYUFBYSxJQUFJO1FBQzdCa0IsVUFBVTtRQUNWQyxVQUFVO1FBQ1ZDLFFBQVFDLGtCQUF5QjtRQUNqQ0MsTUFBTTtRQUNORSxTQUFTLElBQUlDLEtBQUs7SUFDcEI7QUFDRjtBQUVPLFNBQVNDO0lBQ2QsT0FBTzVCLHFEQUFPQSxHQUFHNkIsR0FBRyxDQUFDM0IsY0FBYzRCLFNBQVM7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcm9wYWlkLWRhby8uL2xpYi9hdXRoL2p3dC50cz8xOGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QsIHsgdHlwZSBTZWNyZXQsIHR5cGUgU2lnbk9wdGlvbnMgfSBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tIFwibmV4dC9oZWFkZXJzXCI7XHJcbmltcG9ydCB7IGVudiB9IGZyb20gXCIuLi9lbnZcIjtcclxuaW1wb3J0IHR5cGUgeyBSb2xlIH0gZnJvbSBcIi4vcm9sZXNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIEp3dENsYWltcyA9IHtcclxuICBzdWI6IHN0cmluZztcclxuICByb2xlOiBSb2xlO1xyXG59O1xyXG5cclxuY29uc3QgQ09PS0lFX05BTUUgPSBcImNyb3BhaWRfdG9rZW5cIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaWduSnd0KGNsYWltczogSnd0Q2xhaW1zKSB7XHJcbiAgY29uc3Qgc2VjcmV0OiBTZWNyZXQgPSBlbnYuSldUX1NFQ1JFVDtcclxuICBjb25zdCBvcHRpb25zOiBTaWduT3B0aW9ucyA9IHtcclxuICAgIGV4cGlyZXNJbjogZW52LkpXVF9FWFBJUkVTX0lOIGFzIFNpZ25PcHRpb25zW1wiZXhwaXJlc0luXCJdLFxyXG4gIH07XHJcbiAgcmV0dXJuIGp3dC5zaWduKGNsYWltcywgc2VjcmV0LCBvcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUp3dCh0b2tlbjogc3RyaW5nKTogSnd0Q2xhaW1zIHtcclxuICBjb25zdCBwYXlsb2FkID0gand0LnZlcmlmeSh0b2tlbiwgZW52LkpXVF9TRUNSRVQpO1xyXG4gIGlmICh0eXBlb2YgcGF5bG9hZCAhPT0gXCJvYmplY3RcIiB8fCBwYXlsb2FkID09PSBudWxsKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRva2VuIHBheWxvYWRcIik7XHJcbiAgfVxyXG4gIGNvbnN0IHsgc3ViLCByb2xlIH0gPSBwYXlsb2FkIGFzIFBhcnRpYWw8Snd0Q2xhaW1zPjtcclxuICBpZiAoIXN1YiB8fCAhcm9sZSkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB0b2tlbiBjbGFpbXNcIik7XHJcbiAgcmV0dXJuIHsgc3ViLCByb2xlIH0gYXMgSnd0Q2xhaW1zO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0QXV0aENvb2tpZSh0b2tlbjogc3RyaW5nKSB7XHJcbiAgY29va2llcygpLnNldChDT09LSUVfTkFNRSwgdG9rZW4sIHtcclxuICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgc2FtZVNpdGU6IFwibGF4XCIsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcclxuICAgIHBhdGg6IFwiL1wiLFxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBdXRoQ29va2llKCkge1xyXG4gIGNvb2tpZXMoKS5zZXQoQ09PS0lFX05BTUUsIFwiXCIsIHtcclxuICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgc2FtZVNpdGU6IFwibGF4XCIsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcclxuICAgIHBhdGg6IFwiL1wiLFxyXG4gICAgZXhwaXJlczogbmV3IERhdGUoMCksXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoVG9rZW5Gcm9tQ29va2llcygpIHtcclxuICByZXR1cm4gY29va2llcygpLmdldChDT09LSUVfTkFNRSk/LnZhbHVlID8/IG51bGw7XHJcbn1cclxuIl0sIm5hbWVzIjpbImp3dCIsImNvb2tpZXMiLCJlbnYiLCJDT09LSUVfTkFNRSIsInNpZ25Kd3QiLCJjbGFpbXMiLCJzZWNyZXQiLCJKV1RfU0VDUkVUIiwib3B0aW9ucyIsImV4cGlyZXNJbiIsIkpXVF9FWFBJUkVTX0lOIiwic2lnbiIsInZlcmlmeUp3dCIsInRva2VuIiwicGF5bG9hZCIsInZlcmlmeSIsIkVycm9yIiwic3ViIiwicm9sZSIsInNldEF1dGhDb29raWUiLCJzZXQiLCJodHRwT25seSIsInNhbWVTaXRlIiwic2VjdXJlIiwicHJvY2VzcyIsInBhdGgiLCJjbGVhckF1dGhDb29raWUiLCJleHBpcmVzIiwiRGF0ZSIsImdldEF1dGhUb2tlbkZyb21Db29raWVzIiwiZ2V0IiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth/jwt.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth/roles.ts":
/*!***************************!*\
  !*** ./lib/auth/roles.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALL_ROLES: () => (/* binding */ ALL_ROLES),\n/* harmony export */   Roles: () => (/* binding */ Roles)\n/* harmony export */ });\nconst Roles = {\n    Farmer: \"Farmer\",\n    Voter: \"Voter\",\n    Admin: \"Admin\"\n};\nconst ALL_ROLES = [\n    Roles.Farmer,\n    Roles.Voter,\n    Roles.Admin\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC9yb2xlcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLFFBQVE7SUFDbkJDLFFBQVE7SUFDUkMsT0FBTztJQUNQQyxPQUFPO0FBQ1QsRUFBVztBQUlKLE1BQU1DLFlBQW9CO0lBQUNKLE1BQU1DLE1BQU07SUFBRUQsTUFBTUUsS0FBSztJQUFFRixNQUFNRyxLQUFLO0NBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nyb3BhaWQtZGFvLy4vbGliL2F1dGgvcm9sZXMudHM/NzE3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUm9sZXMgPSB7XHJcbiAgRmFybWVyOiBcIkZhcm1lclwiLFxyXG4gIFZvdGVyOiBcIlZvdGVyXCIsXHJcbiAgQWRtaW46IFwiQWRtaW5cIixcclxufSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCB0eXBlIFJvbGUgPSAodHlwZW9mIFJvbGVzKVtrZXlvZiB0eXBlb2YgUm9sZXNdO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFMTF9ST0xFUzogUm9sZVtdID0gW1JvbGVzLkZhcm1lciwgUm9sZXMuVm90ZXIsIFJvbGVzLkFkbWluXTtcclxuIl0sIm5hbWVzIjpbIlJvbGVzIiwiRmFybWVyIiwiVm90ZXIiLCJBZG1pbiIsIkFMTF9ST0xFUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth/roles.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth/server.ts":
/*!****************************!*\
  !*** ./lib/auth/server.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAuthUser: () => (/* binding */ getAuthUser),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth/jwt */ \"(rsc)/./lib/auth/jwt.ts\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./models/User.ts\");\n\n\n\nasync function getAuthUser() {\n    const token = (0,_lib_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getAuthTokenFromCookies)();\n    if (!token) return null;\n    const claims = (0,_lib_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.verifyJwt)(token);\n    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectDb)();\n    const user = await _models_User__WEBPACK_IMPORTED_MODULE_2__.User.findById(claims.sub).lean();\n    if (!user) return null;\n    return {\n        id: String(user._id),\n        email: user.email,\n        name: user.name,\n        role: user.role,\n        stakeAmount: user.stakeAmount\n    };\n}\nasync function requireAuth(allowedRoles) {\n    const user = await getAuthUser();\n    if (!user) {\n        const err = new Error(\"Unauthorized\");\n        err.status = 401;\n        throw err;\n    }\n    if (allowedRoles && !allowedRoles.includes(user.role)) {\n        const err = new Error(\"Forbidden\");\n        err.status = 403;\n        throw err;\n    }\n    return user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC9zZXJ2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUM7QUFDK0I7QUFDL0I7QUFXOUIsZUFBZUk7SUFDcEIsTUFBTUMsUUFBUUosc0VBQXVCQTtJQUNyQyxJQUFJLENBQUNJLE9BQU8sT0FBTztJQUVuQixNQUFNQyxTQUFTSix3REFBU0EsQ0FBQ0c7SUFDekIsTUFBTUwsa0RBQVNBO0lBRWYsTUFBTU8sT0FBTyxNQUFNSiw4Q0FBSUEsQ0FBQ0ssUUFBUSxDQUFDRixPQUFPRyxHQUFHLEVBQUVDLElBQUk7SUFDakQsSUFBSSxDQUFDSCxNQUFNLE9BQU87SUFFbEIsT0FBTztRQUNMSSxJQUFJQyxPQUFPLEtBQWNDLEdBQUc7UUFDNUJDLE9BQU9QLEtBQUtPLEtBQUs7UUFDakJDLE1BQU1SLEtBQUtRLElBQUk7UUFDZkMsTUFBTVQsS0FBS1MsSUFBSTtRQUNmQyxhQUFhVixLQUFLVSxXQUFXO0lBQy9CO0FBQ0Y7QUFFTyxlQUFlQyxZQUFZQyxZQUFxQjtJQUNyRCxNQUFNWixPQUFPLE1BQU1IO0lBQ25CLElBQUksQ0FBQ0csTUFBTTtRQUNULE1BQU1hLE1BQU0sSUFBSUMsTUFBTTtRQUNyQkQsSUFBWUUsTUFBTSxHQUFHO1FBQ3RCLE1BQU1GO0lBQ1I7SUFDQSxJQUFJRCxnQkFBZ0IsQ0FBQ0EsYUFBYUksUUFBUSxDQUFDaEIsS0FBS1MsSUFBSSxHQUFHO1FBQ3JELE1BQU1JLE1BQU0sSUFBSUMsTUFBTTtRQUNyQkQsSUFBWUUsTUFBTSxHQUFHO1FBQ3RCLE1BQU1GO0lBQ1I7SUFDQSxPQUFPYjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JvcGFpZC1kYW8vLi9saWIvYXV0aC9zZXJ2ZXIudHM/OTI2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0RGIgfSBmcm9tIFwiQC9saWIvZGJcIjtcclxuaW1wb3J0IHsgZ2V0QXV0aFRva2VuRnJvbUNvb2tpZXMsIHZlcmlmeUp3dCB9IGZyb20gXCJAL2xpYi9hdXRoL2p3dFwiO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIkAvbW9kZWxzL1VzZXJcIjtcclxuaW1wb3J0IHR5cGUgeyBSb2xlIH0gZnJvbSBcIkAvbGliL2F1dGgvcm9sZXNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIEF1dGhlZFVzZXIgPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICByb2xlOiBSb2xlO1xyXG4gIHN0YWtlQW1vdW50OiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXV0aFVzZXIoKTogUHJvbWlzZTxBdXRoZWRVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHRva2VuID0gZ2V0QXV0aFRva2VuRnJvbUNvb2tpZXMoKTtcclxuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgY2xhaW1zID0gdmVyaWZ5Snd0KHRva2VuKTtcclxuICBhd2FpdCBjb25uZWN0RGIoKTtcclxuXHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoY2xhaW1zLnN1YikubGVhbigpO1xyXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpZDogU3RyaW5nKCh1c2VyIGFzIGFueSkuX2lkKSxcclxuICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgc3Rha2VBbW91bnQ6IHVzZXIuc3Rha2VBbW91bnQsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKGFsbG93ZWRSb2xlcz86IFJvbGVbXSkge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRBdXRoVXNlcigpO1xyXG4gIGlmICghdXNlcikge1xyXG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKFwiVW5hdXRob3JpemVkXCIpO1xyXG4gICAgKGVyciBhcyBhbnkpLnN0YXR1cyA9IDQwMTtcclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbiAgaWYgKGFsbG93ZWRSb2xlcyAmJiAhYWxsb3dlZFJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcclxuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcIkZvcmJpZGRlblwiKTtcclxuICAgIChlcnIgYXMgYW55KS5zdGF0dXMgPSA0MDM7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25uZWN0RGIiLCJnZXRBdXRoVG9rZW5Gcm9tQ29va2llcyIsInZlcmlmeUp3dCIsIlVzZXIiLCJnZXRBdXRoVXNlciIsInRva2VuIiwiY2xhaW1zIiwidXNlciIsImZpbmRCeUlkIiwic3ViIiwibGVhbiIsImlkIiwiU3RyaW5nIiwiX2lkIiwiZW1haWwiLCJuYW1lIiwicm9sZSIsInN0YWtlQW1vdW50IiwicmVxdWlyZUF1dGgiLCJhbGxvd2VkUm9sZXMiLCJlcnIiLCJFcnJvciIsInN0YXR1cyIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth/server.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectDb: () => (/* binding */ connectDb)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env */ \"(rsc)/./lib/env.ts\");\n\n\nconst cached = global._mongoose ?? {\n    conn: null,\n    promise: null\n};\nglobal._mongoose = cached;\nasync function connectDb() {\n    if (cached.conn) return cached.conn;\n    if (!cached.promise) {\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(_env__WEBPACK_IMPORTED_MODULE_1__.env.MONGODB_URI, {\n            bufferCommands: false\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNKO0FBWTVCLE1BQU1FLFNBQXdCQyxPQUFPQyxTQUFTLElBQUk7SUFBRUMsTUFBTTtJQUFNQyxTQUFTO0FBQUs7QUFDOUVILE9BQU9DLFNBQVMsR0FBR0Y7QUFFWixlQUFlSztJQUNwQixJQUFJTCxPQUFPRyxJQUFJLEVBQUUsT0FBT0gsT0FBT0csSUFBSTtJQUNuQyxJQUFJLENBQUNILE9BQU9JLE9BQU8sRUFBRTtRQUNuQkosT0FBT0ksT0FBTyxHQUFHTix1REFBZ0IsQ0FBQ0MscUNBQUdBLENBQUNRLFdBQVcsRUFBRTtZQUNqREMsZ0JBQWdCO1FBQ2xCO0lBQ0Y7SUFDQVIsT0FBT0csSUFBSSxHQUFHLE1BQU1ILE9BQU9JLE9BQU87SUFDbEMsT0FBT0osT0FBT0csSUFBSTtBQUNwQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nyb3BhaWQtZGFvLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiLi9lbnZcIjtcclxuXHJcbnR5cGUgTW9uZ29vc2VDYWNoZSA9IHtcclxuICBjb25uOiB0eXBlb2YgbW9uZ29vc2UgfCBudWxsO1xyXG4gIHByb21pc2U6IFByb21pc2U8dHlwZW9mIG1vbmdvb3NlPiB8IG51bGw7XHJcbn07XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxyXG4gIHZhciBfbW9uZ29vc2U6IE1vbmdvb3NlQ2FjaGUgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmNvbnN0IGNhY2hlZDogTW9uZ29vc2VDYWNoZSA9IGdsb2JhbC5fbW9uZ29vc2UgPz8geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcbmdsb2JhbC5fbW9uZ29vc2UgPSBjYWNoZWQ7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdERiKCkge1xyXG4gIGlmIChjYWNoZWQuY29ubikgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChlbnYuTU9OR09EQl9VUkksIHtcclxuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImVudiIsImNhY2hlZCIsImdsb2JhbCIsIl9tb25nb29zZSIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERiIiwiY29ubmVjdCIsIk1PTkdPREJfVVJJIiwiYnVmZmVyQ29tbWFuZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/env.ts":
/*!********************!*\
  !*** ./lib/env.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst envSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    MONGODB_URI: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    JWT_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(16),\n    JWT_EXPIRES_IN: zod__WEBPACK_IMPORTED_MODULE_0__.string().default(\"7d\"),\n    UPLOAD_DIR: zod__WEBPACK_IMPORTED_MODULE_0__.string().default(\"public/uploads\"),\n    NEXT_PUBLIC_APP_NAME: zod__WEBPACK_IMPORTED_MODULE_0__.string().default(\"CropAid DAO\"),\n    NEXT_PUBLIC_APP_URL: zod__WEBPACK_IMPORTED_MODULE_0__.string().default(\"http://localhost:3000\")\n});\nlet cached = null;\nfunction loadEnv() {\n    if (cached) return cached;\n    const parsed = envSchema.safeParse({\n        MONGODB_URI: process.env.MONGODB_URI,\n        JWT_SECRET: process.env.JWT_SECRET,\n        JWT_EXPIRES_IN: process.env.JWT_EXPIRES_IN ?? \"7d\",\n        UPLOAD_DIR: process.env.UPLOAD_DIR ?? \"public/uploads\",\n        NEXT_PUBLIC_APP_NAME: \"CropAid DAO\" ?? 0,\n        NEXT_PUBLIC_APP_URL: \"http://localhost:3000\" ?? 0\n    });\n    if (!parsed.success) {\n        const message = parsed.error.issues.map((i)=>`${i.path.join(\".\")}: ${i.message}`).join(\"; \");\n        throw new Error(`Invalid environment variables: ${message}`);\n    }\n    cached = parsed.data;\n    return cached;\n}\nconst env = new Proxy({}, {\n    get (_target, prop) {\n        const data = loadEnv();\n        if (typeof prop === \"string\") return data[prop];\n        return undefined;\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZW52LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdCO0FBRXhCLE1BQU1DLFlBQVlELHVDQUFRLENBQUM7SUFDekJHLGFBQWFILHVDQUFRLEdBQUdLLEdBQUcsQ0FBQztJQUM1QkMsWUFBWU4sdUNBQVEsR0FBR0ssR0FBRyxDQUFDO0lBQzNCRSxnQkFBZ0JQLHVDQUFRLEdBQUdRLE9BQU8sQ0FBQztJQUNuQ0MsWUFBWVQsdUNBQVEsR0FBR1EsT0FBTyxDQUFDO0lBQy9CRSxzQkFBc0JWLHVDQUFRLEdBQUdRLE9BQU8sQ0FBQztJQUN6Q0cscUJBQXFCWCx1Q0FBUSxHQUFHUSxPQUFPLENBQUM7QUFDMUM7QUFJQSxJQUFJSSxTQUFxQjtBQUV6QixTQUFTQztJQUNQLElBQUlELFFBQVEsT0FBT0E7SUFDbkIsTUFBTUUsU0FBU2IsVUFBVWMsU0FBUyxDQUFDO1FBQ2pDWixhQUFhYSxRQUFRQyxHQUFHLENBQUNkLFdBQVc7UUFDcENHLFlBQVlVLFFBQVFDLEdBQUcsQ0FBQ1gsVUFBVTtRQUNsQ0MsZ0JBQWdCUyxRQUFRQyxHQUFHLENBQUNWLGNBQWMsSUFBSTtRQUM5Q0UsWUFBWU8sUUFBUUMsR0FBRyxDQUFDUixVQUFVLElBQUk7UUFDdENDLHNCQUFzQk0sYUFBZ0MsSUFBSSxDQUFhO1FBQ3ZFTCxxQkFBcUJLLHVCQUErQixJQUFJLENBQXVCO0lBQ2pGO0lBRUEsSUFBSSxDQUFDRixPQUFPSSxPQUFPLEVBQUU7UUFDbkIsTUFBTUMsVUFBVUwsT0FBT00sS0FBSyxDQUFDQyxNQUFNLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxJQUFNLENBQUMsRUFBRUEsRUFBRUMsSUFBSSxDQUFDQyxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUVGLEVBQUVKLE9BQU8sQ0FBQyxDQUFDLEVBQUVNLElBQUksQ0FBQztRQUN6RixNQUFNLElBQUlDLE1BQU0sQ0FBQywrQkFBK0IsRUFBRVAsUUFBUSxDQUFDO0lBQzdEO0lBRUFQLFNBQVNFLE9BQU9hLElBQUk7SUFDcEIsT0FBT2Y7QUFDVDtBQUVPLE1BQU1LLE1BQVcsSUFBSVcsTUFBTSxDQUFDLEdBQVU7SUFDM0NDLEtBQUlDLE9BQU8sRUFBRUMsSUFBSTtRQUNmLE1BQU1KLE9BQU9kO1FBQ2IsSUFBSSxPQUFPa0IsU0FBUyxVQUFVLE9BQU8sSUFBYSxDQUFDQSxLQUFLO1FBQ3hELE9BQU9DO0lBQ1Q7QUFDRixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JvcGFpZC1kYW8vLi9saWIvZW52LnRzPzkzZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcclxuXHJcbmNvbnN0IGVudlNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBNT05HT0RCX1VSSTogei5zdHJpbmcoKS5taW4oMSksXHJcbiAgSldUX1NFQ1JFVDogei5zdHJpbmcoKS5taW4oMTYpLFxyXG4gIEpXVF9FWFBJUkVTX0lOOiB6LnN0cmluZygpLmRlZmF1bHQoXCI3ZFwiKSxcclxuICBVUExPQURfRElSOiB6LnN0cmluZygpLmRlZmF1bHQoXCJwdWJsaWMvdXBsb2Fkc1wiKSxcclxuICBORVhUX1BVQkxJQ19BUFBfTkFNRTogei5zdHJpbmcoKS5kZWZhdWx0KFwiQ3JvcEFpZCBEQU9cIiksXHJcbiAgTkVYVF9QVUJMSUNfQVBQX1VSTDogei5zdHJpbmcoKS5kZWZhdWx0KFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIpLFxyXG59KTtcclxuXHJcbmV4cG9ydCB0eXBlIEVudiA9IHouaW5mZXI8dHlwZW9mIGVudlNjaGVtYT47XHJcblxyXG5sZXQgY2FjaGVkOiBFbnYgfCBudWxsID0gbnVsbDtcclxuXHJcbmZ1bmN0aW9uIGxvYWRFbnYoKTogRW52IHtcclxuICBpZiAoY2FjaGVkKSByZXR1cm4gY2FjaGVkO1xyXG4gIGNvbnN0IHBhcnNlZCA9IGVudlNjaGVtYS5zYWZlUGFyc2Uoe1xyXG4gICAgTU9OR09EQl9VUkk6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLFxyXG4gICAgSldUX1NFQ1JFVDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcclxuICAgIEpXVF9FWFBJUkVTX0lOOiBwcm9jZXNzLmVudi5KV1RfRVhQSVJFU19JTiA/PyBcIjdkXCIsXHJcbiAgICBVUExPQURfRElSOiBwcm9jZXNzLmVudi5VUExPQURfRElSID8/IFwicHVibGljL3VwbG9hZHNcIixcclxuICAgIE5FWFRfUFVCTElDX0FQUF9OQU1FOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfTkFNRSA/PyBcIkNyb3BBaWQgREFPXCIsXHJcbiAgICBORVhUX1BVQkxJQ19BUFBfVVJMOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMID8/IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsXHJcbiAgfSk7XHJcblxyXG4gIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBwYXJzZWQuZXJyb3IuaXNzdWVzLm1hcCgoaSkgPT4gYCR7aS5wYXRoLmpvaW4oXCIuXCIpfTogJHtpLm1lc3NhZ2V9YCkuam9pbihcIjsgXCIpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGVudmlyb25tZW50IHZhcmlhYmxlczogJHttZXNzYWdlfWApO1xyXG4gIH1cclxuXHJcbiAgY2FjaGVkID0gcGFyc2VkLmRhdGE7XHJcbiAgcmV0dXJuIGNhY2hlZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGVudjogRW52ID0gbmV3IFByb3h5KHt9IGFzIEVudiwge1xyXG4gIGdldChfdGFyZ2V0LCBwcm9wKSB7XHJcbiAgICBjb25zdCBkYXRhID0gbG9hZEVudigpO1xyXG4gICAgaWYgKHR5cGVvZiBwcm9wID09PSBcInN0cmluZ1wiKSByZXR1cm4gKGRhdGEgYXMgYW55KVtwcm9wXTtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfSxcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJ6IiwiZW52U2NoZW1hIiwib2JqZWN0IiwiTU9OR09EQl9VUkkiLCJzdHJpbmciLCJtaW4iLCJKV1RfU0VDUkVUIiwiSldUX0VYUElSRVNfSU4iLCJkZWZhdWx0IiwiVVBMT0FEX0RJUiIsIk5FWFRfUFVCTElDX0FQUF9OQU1FIiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsImNhY2hlZCIsImxvYWRFbnYiLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJwcm9jZXNzIiwiZW52Iiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJlcnJvciIsImlzc3VlcyIsIm1hcCIsImkiLCJwYXRoIiwiam9pbiIsIkVycm9yIiwiZGF0YSIsIlByb3h5IiwiZ2V0IiwiX3RhcmdldCIsInByb3AiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./models/User.ts":
/*!************************!*\
  !*** ./models/User.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_auth_roles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth/roles */ \"(rsc)/./lib/auth/roles.ts\");\n\n\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        lowercase: true,\n        trim: true\n    },\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    passwordHash: {\n        type: String,\n        required: true\n    },\n    role: {\n        type: String,\n        required: true,\n        enum: _lib_auth_roles__WEBPACK_IMPORTED_MODULE_1__.ALL_ROLES,\n        default: \"Farmer\"\n    },\n    stakeAmount: {\n        type: Number,\n        required: true,\n        default: 0\n    }\n}, {\n    timestamps: true\n});\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User ?? (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"User\", UserSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvVXNlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZEO0FBQ0w7QUFZeEQsTUFBTUksYUFBYSxJQUFJSiw0Q0FBTUEsQ0FDNUI7SUFDQ0ssT0FBTztRQUFFQyxNQUFNQztRQUFRQyxVQUFVO1FBQU1DLFFBQVE7UUFBTUMsV0FBVztRQUFNQyxNQUFNO0lBQUs7SUFDakZDLE1BQU07UUFBRU4sTUFBTUM7UUFBUUMsVUFBVTtRQUFNRyxNQUFNO0lBQUs7SUFDakRFLGNBQWM7UUFBRVAsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQzdDTSxNQUFNO1FBQUVSLE1BQU1DO1FBQVFDLFVBQVU7UUFBTU8sTUFBTVosc0RBQVNBO1FBQUVhLFNBQVM7SUFBUztJQUN6RUMsYUFBYTtRQUFFWCxNQUFNWTtRQUFRVixVQUFVO1FBQU1RLFNBQVM7SUFBRTtBQUN6RCxHQUNBO0lBQUVHLFlBQVk7QUFBSztBQUdiLE1BQU1DLE9BQXVCbEIsNENBQU1BLENBQUNrQixJQUFJLElBQUluQiwrQ0FBS0EsQ0FBVSxRQUFRRyxZQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JvcGFpZC1kYW8vLi9tb2RlbHMvVXNlci50cz82ZGM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjaGVtYSwgbW9kZWwsIG1vZGVscywgdHlwZSBNb2RlbCB9IGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgeyBBTExfUk9MRVMsIHR5cGUgUm9sZSB9IGZyb20gXCJAL2xpYi9hdXRoL3JvbGVzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBVc2VyRG9jID0ge1xyXG5cdGVtYWlsOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdHBhc3N3b3JkSGFzaDogc3RyaW5nO1xyXG5cdHJvbGU6IFJvbGU7XHJcblx0c3Rha2VBbW91bnQ6IG51bWJlcjtcclxuXHRjcmVhdGVkQXQ6IERhdGU7XHJcblx0dXBkYXRlZEF0OiBEYXRlO1xyXG59O1xyXG5cclxuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBTY2hlbWE8VXNlckRvYz4oXHJcblx0e1xyXG5cdFx0ZW1haWw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlLCBsb3dlcmNhc2U6IHRydWUsIHRyaW06IHRydWUgfSxcclxuXHRcdG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdHJpbTogdHJ1ZSB9LFxyXG5cdFx0cGFzc3dvcmRIYXNoOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuXHRcdHJvbGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgZW51bTogQUxMX1JPTEVTLCBkZWZhdWx0OiBcIkZhcm1lclwiIH0sXHJcblx0XHRzdGFrZUFtb3VudDogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwIH0sXHJcblx0fSxcclxuXHR7IHRpbWVzdGFtcHM6IHRydWUgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IFVzZXI6IE1vZGVsPFVzZXJEb2M+ID0gbW9kZWxzLlVzZXIgPz8gbW9kZWw8VXNlckRvYz4oXCJVc2VyXCIsIFVzZXJTY2hlbWEpO1xyXG5cclxuIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vZGVsIiwibW9kZWxzIiwiQUxMX1JPTEVTIiwiVXNlclNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwibG93ZXJjYXNlIiwidHJpbSIsIm5hbWUiLCJwYXNzd29yZEhhc2giLCJyb2xlIiwiZW51bSIsImRlZmF1bHQiLCJzdGFrZUFtb3VudCIsIk51bWJlciIsInRpbWVzdGFtcHMiLCJVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/User.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jsonwebtoken","vendor-chunks/zod","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=F%3A%5Ccropaid-dao%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Ccropaid-dao&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();